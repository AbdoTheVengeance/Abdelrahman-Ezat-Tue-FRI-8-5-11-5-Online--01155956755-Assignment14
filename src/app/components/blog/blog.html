<section id="blog">
  <section
    id="hero-header"
    class="position-relative overflow-hidden d-flex justify-content-center align-items-center"
  >
    <app-grid-background></app-grid-background>
    <div class="circle circle-orange"></div>
    <div class="circle circle-orange2"></div>
    <div class="circle circle-yellow"></div>
    <div class="hero-container position-relative mx-auto z-3">
      <div class="header-content text-center">
        <app-section-label>
          <i class="fa fa-newspaper"></i>
          <span class="small fw-medium" style="color: #d4d4d4">مدونتنا</span>
        </app-section-label>

        <h1 class="header-title mb-3">
          استكشف
          <span class="gradient-text">مقالاتنا</span>
        </h1>
        <p class="mx-auto">اكتشف الدروس والرؤى وأفضل الممارسات للتطوير الحديث</p>
      </div>
    </div>
  </section>

  <section id="fixed-search" class="sticky-search-header">
    <div class="container-lg custom-container py-3">
      <div class="d-flex flex-column flex-md-row justify-content-between align-items-center gap-3">
        <div class="search-wrapper position-relative w-100">
          <input
            type="text"
            class="form-control input-dark px-4 ps-5 py-3"
            placeholder="ابحث في المقالات..."
            (input)="searchPost($event)"
          />
          <i class="fa-solid fa-magnifying-glass search-icon"></i>
        </div>
        <div class="filteration-buttons d-flex flex-wrap justify-content-center gap-3">
          <button
            class="filter-btn py-2 px-3 active-filter-btn"
            [class.normal-filter-btn]="activeCategory !== 'all'"
            [class.active-filter-btn]="activeCategory === 'all'"
            (click)="setActiveFilter('all')"
          >
            جميع المقالات
          </button>

          @for (category of categories; track $index) {
            <button
              (click)="setActiveFilter(category.name)"
              class="filter-btn py-2 px-3"
              [class.active-filter-btn]="activeCategory === category.name"
              [class.normal-filter-btn]="activeCategory !== category.name"
            >
              {{ category.name }}
            </button>
          }
        </div>
      </div>
    </div>
  </section>

  <section id="filtered-posts">
    <div class="container-lg py-5 mx-auto px-3 px-sm-4 custom-container">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <p class="text-neutral-400 fw-light">
          عرض
          <span class="fw-bold text-white"> {{ filteredPostsLength }} </span>
          مقالات
          @if (activeCategory !== 'all') {
            في
            <span class="fw-bold" style="color: #ff6900"> {{ activeCategory }} </span>
          }
        </p>
        <div class="d-flex align-items-center gap-2">
          <div class="display-style align-items-center d-flex gap-0 p-1 justify-content-between">
            <button
              class="btn display-btn display-active-btn"
              (click)="setActiveDisplay('grid')"
              [class.display-active-btn]="activeDisplayStle === 'grid'"
              [class.display-normal-btn]="activeDisplayStle !== 'grid'"
            >
              <i class="fa-solid fa-border-all"></i>
            </button>
            <button
              class="btn display-btn"
              (click)="setActiveDisplay('list')"
              [class.display-active-btn]="activeDisplayStle === 'list'"
              [class.display-normal-btn]="activeDisplayStle !== 'list'"
            >
              <i class="fa-solid fa-bars"></i>
            </button>
          </div>
          @if (activeCategory !== 'all') {
            <button class="clear-filters-btn btn" (click)="activeCategory = 'all'">
              <i class="fa-solid fa-x"></i>
              مسح الفلاتر
            </button>
          }
        </div>
      </div>

      <div
        [class.display-posts-grid]="activeDisplayStle === 'grid'"
        [class.display-posts-list]="activeDisplayStle === 'list'"
      >
        @for (
          article of filteredPosts.slice((pageIndex - 1) * pageSize, pageIndex * pageSize);
          track $index
        ) {
          @if (activeDisplayStle === 'grid') {
            <app-post [article]="article"></app-post>
          } @else {
            <app-horizontal-post [article]="article"></app-horizontal-post>
          }
        }
      </div>
      @if (pages.length > 1) {
        <div id="pagination" class="d-flex justify-content-center align-items-center gap-2 mt-5">
          <button
            class="btn"
            [class.disabled-button]="pageIndex <= 1"
            [class.normal-button]="pageIndex > 1"
            (click)="prevPage()"
            [disabled]="pageIndex <= 1"
          >
            <i class="fa-solid fa-angle-right"></i>
          </button>

          <div id="pages" class="">
            @for (page of pages; track $index) {
              @if (page == pageIndex) {
                <button class="btn active-button" (click)="setPostsPage(page)">
                  {{ page }}
                </button>
              } @else {
                <button class="btn normal-button" (click)="setPostsPage(page)">
                  {{ page }}
                </button>
              }
            }
          </div>
          <button
            class="btn"
            (click)="nextPage()"
            [class.disabled-button]="pageIndex >= pages.length"
            [class.normal-button]="pageIndex < pages.length"
            [disabled]="pageIndex >= pages.length"
          >
            <i class="fa-solid fa-angle-left"></i>
          </button>
        </div>
        <p class="text-center fs-6 fw-normal text-neutral-500 mt-4">
          صفحة {{ pageIndex }} من {{ pages.length }}
        </p>
      }
    </div>
  </section>
</section>
